# ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ ν™•λ€ κ³„ν (5% β†’ 60%)

## π“‹ ν„μ¬ μƒνƒ λ¶„μ„

### ν„μ¬ λ¬Έμ μ 
1. **E2E ν…μ¤νΈ μ¶©λ**: Playwright ν…μ¤νΈκ°€ Vitestμ—μ„ μ‹¤ν–‰λμ–΄ μ¶©λ λ°μƒ
2. **λ‚®μ€ ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€**: ν„μ¬ μ•½ 5% μμ¤€
3. **ν…μ¤νΈ νμΌ λ¶€μ΅±**: 26κ° ν…μ¤νΈ νμΌ μ¤‘ 4κ°λ§ ν†µκ³Ό
4. **νƒ€μ„μ•„μ›ƒ μ΄μ**: ν…μ¤νΈ μ‹¤ν–‰ μ‹ νƒ€μ„μ•„μ›ƒ λ°μƒ

### ν„μ¬ ν…μ¤νΈ κµ¬μ΅°
- **λ‹¨μ„ ν…μ¤νΈ**: Vitest μ‚¬μ© (tests/ λ””λ ‰ν„°λ¦¬)
- **E2E ν…μ¤νΈ**: Playwright μ‚¬μ© (e2e/ λ””λ ‰ν„°λ¦¬)
- **ν†µκ³Ό ν…μ¤νΈ**: μ»΄ν¬λ„νΈ ν…μ¤νΈ μΌλ¶€ (74/174 ν…μ¤νΈ ν†µκ³Ό)

## π― λ©ν‘

**λ©ν‘ μ»¤λ²„λ¦¬μ§€**: 60% (2025λ…„ 8μ›” λ§κΉμ§€)
- λ‹¨μ„ ν…μ¤νΈ: 70% μ»¤λ²„λ¦¬μ§€
- ν†µν•© ν…μ¤νΈ: 50% μ»¤λ²„λ¦¬μ§€
- E2E ν…μ¤νΈ: μ£Όμ” μ‚¬μ©μ ν”λ΅μ° 100% μ»¤λ²„

## π“ μ°μ„ μμ„ κΈ°λ° ν…μ¤νΈ ν™•λ€ κ³„ν

### Phase 1: ν…μ¤νΈ μΈν”„λΌ μ •λΉ„ (1μ£Όμ°¨)
1. **ν…μ¤νΈ ν™κ²½ λ¶„λ¦¬**
   - Vitest μ„¤μ • κ°μ„  (E2E ν…μ¤νΈ μ μ™Έ)
   - Playwright μ„¤μ • νμΌ μƒμ„±
   - ν…μ¤νΈ μ¤ν¬λ¦½νΈ λ¶„λ¦¬ (unit, integration, e2e)

2. **Mock μ‹μ¤ν… κµ¬μ¶•**
   - Supabase ν΄λΌμ΄μ–ΈνΈ mock
   - Clerk μΈμ¦ mock
   - API μ‘λ‹µ mock

### Phase 2: ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§ ν…μ¤νΈ (2-3μ£Όμ°¨)

#### 2.1 Supabase μ„λΉ„μ¤ ν…μ¤νΈ (μ°μ„ μμ„: μµμƒ)
ν…μ¤νΈ λ€μƒ νμΌ:
- `lib/services/supabase-hotdeal-service.ts`
- `lib/services/supabase-user-service.ts`
- `lib/services/supabase-order-service.ts`
- `lib/services/supabase-payment-service.ts`
- `lib/services/supabase-settings-service.ts`

ν…μ¤νΈ ν•­λ©:
- CRUD μ‘μ—… μ •ν™•μ„±
- μ—λ¬ μ²λ¦¬
- λ°μ΄ν„° κ²€μ¦
- νƒ€μ… μ•μ •μ„±

#### 2.2 ν¬λ΅¤λ¬ ν…μ¤νΈ (μ°μ„ μμ„: μƒ)
ν…μ¤νΈ λ€μƒ:
- `lib/crawlers/base-hotdeal-crawler.ts`
- κ° μ»¤λ®¤λ‹ν‹°λ³„ ν¬λ΅¤λ¬ (6κ°)

ν…μ¤νΈ ν•­λ©:
- λ°μ΄ν„° νμ‹± μ •ν™•μ„±
- μ‹κ°„ ν•„ν„°λ§
- μ¤‘λ³µ μ²λ¦¬
- μ—λ¬ λ³µκµ¬

#### 2.3 ν›… ν…μ¤νΈ (μ°μ„ μμ„: μƒ)
ν…μ¤νΈ λ€μƒ:
- `hooks/use-supabase-*.ts` (λ¨λ“  Supabase ν›…)
- `hooks/use-translation.ts`
- `hooks/use-currency.ts`

ν…μ¤νΈ ν•­λ©:
- μƒνƒ κ΄€λ¦¬
- μΊμ‹± λ™μ‘
- μ—λ¬ μƒνƒ
- λ΅λ”© μƒνƒ

### Phase 3: UI μ»΄ν¬λ„νΈ ν…μ¤νΈ (4μ£Όμ°¨)

#### 3.1 κΈ°λ¥λ³„ μ»΄ν¬λ„νΈ ν…μ¤νΈ
- `components/features/hotdeals/*`
- `components/features/order/*`
- `components/features/auth/*`
- `components/features/payment/*`

#### 3.2 κ³µν†µ μ»΄ν¬λ„νΈ ν…μ¤νΈ
- `components/common/*`
- `components/ui/*` (shadcn μ»΄ν¬λ„νΈ)

### Phase 4: ν†µν•© ν…μ¤νΈ (5μ£Όμ°¨)

#### 4.1 νμ΄μ§€ λ λ²¨ ν…μ¤νΈ
- ν™νμ΄μ§€ λ λ”λ§
- ν•«λ” λ¦¬μ¤νΈ νμ΄μ§€
- μ£Όλ¬Έ ν”λ΅μ°
- κ²°μ  ν”λ΅μ°

#### 4.2 API ν†µν•© ν…μ¤νΈ
- Server Actions ν…μ¤νΈ
- λ°μ΄ν„° ν”λ΅μ° κ²€μ¦
- μ—λ¬ μ‹λ‚λ¦¬μ¤

### Phase 5: E2E ν…μ¤νΈ μ •λΉ„ (6μ£Όμ°¨)

#### 5.1 Playwright μ„¤μ • κ°μ„ 
- playwright.config.ts μƒμ„±
- ν…μ¤νΈ ν™κ²½ μ„¤μ •
- CI/CD ν†µν•©

#### 5.2 μ£Όμ” μ‹λ‚λ¦¬μ¤ μ»¤λ²„
- μ‚¬μ©μ νμ›κ°€μ…/λ΅κ·ΈμΈ
- ν•«λ” κ²€μƒ‰ λ° ν•„ν„°λ§
- Buy-for-me μ£Όλ¬Έ μƒμ„±
- κ²°μ  μ²λ¦¬
- κ΄€λ¦¬μ κΈ°λ¥

## π“ μμƒ μ»¤λ²„λ¦¬μ§€ μ§„ν–‰λ¥ 

| μ£Όμ°¨ | λ©ν‘ μ»¤λ²„λ¦¬μ§€ | μ£Όμ” μ‘μ—… |
|------|--------------|----------|
| 1μ£Ό | 10% | ν…μ¤νΈ μΈν”„λΌ μ •λΉ„ |
| 2μ£Ό | 25% | Supabase μ„λΉ„μ¤ ν…μ¤νΈ |
| 3μ£Ό | 35% | ν¬λ΅¤λ¬ & ν›… ν…μ¤νΈ |
| 4μ£Ό | 45% | UI μ»΄ν¬λ„νΈ ν…μ¤νΈ |
| 5μ£Ό | 55% | ν†µν•© ν…μ¤νΈ |
| 6μ£Ό | 60%+ | E2E ν…μ¤νΈ μ •λΉ„ |

## π› οΈ κµ¬ν„ μ „λµ

### 1. ν…μ¤νΈ μ‘μ„± κ°€μ΄λ“λΌμΈ
```typescript
// ν…μ¤νΈ νμΌ κµ¬μ΅°
describe('ServiceName', () => {
  beforeEach(() => {
    // Setup mocks
  })

  describe('methodName', () => {
    it('should handle success case', async () => {
      // Arrange
      // Act
      // Assert
    })

    it('should handle error case', async () => {
      // Test error scenarios
    })
  })
})
```

### 2. Mock μ „λµ
```typescript
// Supabase mock μμ‹
vi.mock('@/lib/supabase/client', () => ({
  supabase: () => ({
    from: vi.fn(() => ({
      select: vi.fn().mockReturnThis(),
      insert: vi.fn().mockReturnThis(),
      update: vi.fn().mockReturnThis(),
      delete: vi.fn().mockReturnThis(),
    }))
  })
}))
```

### 3. μ»¤λ²„λ¦¬μ§€ λ©ν‘
- Statement Coverage: 60%
- Branch Coverage: 50%
- Function Coverage: 70%
- Line Coverage: 60%

## π”„ μ‹¤ν–‰ κ³„ν

### μ¦‰μ‹ μ‹¤ν–‰ (Today)
1. vitest.config.ts μμ • μ™„λ£ β…
2. ν…μ¤νΈ μ¤ν¬λ¦½νΈ λ¶„λ¦¬
3. μ²« λ²μ§Έ μ„λΉ„μ¤ ν…μ¤νΈ μ‘μ„± μ‹μ‘

### μ΄λ² μ£Ό λ©ν‘
1. Supabase μ„λΉ„μ¤ ν…μ¤νΈ 5κ° μ‘μ„±
2. Mock μ‹μ¤ν… κµ¬μ¶•
3. CI νμ΄ν”„λΌμΈ μ„¤μ •

### μΈ΅μ • μ§€ν‘
- μΌμΌ ν…μ¤νΈ μ¶”κ°€ μ
- μ£Όκ°„ μ»¤λ²„λ¦¬μ§€ μ¦κ°€μ¨
- μ‹¤ν¨ ν…μ¤νΈ μμ • μ†λ„
- CI λΉλ“ μ„±κ³µλ¥ 

## π“ μ£Όμμ‚¬ν•­

1. **ν…μ¤νΈ ν’μ§ > μλ‰**: μλ―Έ μλ” ν…μ¤νΈ μ‘μ„±μ— μ§‘μ¤‘
2. **μ μ§„μ  κ°μ„ **: ν• λ²μ— λ¨λ“  κ²ƒμ„ ν•λ ¤ ν•μ§€ μ•κΈ°
3. **CI ν†µν•©**: ν…μ¤νΈκ°€ CIμ—μ„λ„ μ•μ •μ μΌλ΅ μ‹¤ν–‰λλ„λ΅ λ³΄μ¥
4. **λ¬Έμ„ν™”**: ν…μ¤νΈ μ‘μ„± κ°€μ΄λ“ μ§€μ†μ  μ—…λ°μ΄νΈ

## π― μ„±κ³µ μ§€ν‘

- [ ] ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ 60% λ‹¬μ„±
- [ ] CI/CD νμ΄ν”„λΌμΈμ—μ„ λ¨λ“  ν…μ¤νΈ ν†µκ³Ό
- [ ] ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§ 100% ν…μ¤νΈ μ»¤λ²„
- [ ] E2E ν…μ¤νΈλ΅ μ£Όμ” μ‚¬μ©μ ν”λ΅μ° κ²€μ¦
- [ ] ν…μ¤νΈ μ‹¤ν–‰ μ‹κ°„ 5λ¶„ μ΄λ‚΄ μ μ§€

---

**μ‘μ„±μΌ**: 2025-08-05
**λ©ν‘ μ™„λ£μΌ**: 2025-08-31