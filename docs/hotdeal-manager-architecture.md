# 핫딜 통합 관리 시스템 아키텍처

## 🎯 시스템 개요

핫딜 통합 관리 시스템은 크롤링, 데이터 관리, 자동화를 하나의 통합된 인터페이스에서 관리할 수 있는 중앙 집중식 시스템입니다.

### 핵심 가치
- **단순성**: 모든 기능을 한 페이지에서 관리
- **효율성**: 원클릭 크롤링 및 자동 데이터 적용
- **투명성**: 실시간 상태 모니터링 및 히스토리 추적
- **확장성**: 새로운 크롤러 추가 용이

## 📊 시스템 아키텍처

```
┌─────────────────────────────────────────────────┐
│           핫딜 통합 관리 대시보드                │
│  (/admin/hotdeal-manager)                       │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐     │
│  │ 대시보드 │  │  크롤러  │  │ 데이터   │     │
│  │   탭     │  │    탭    │  │   탭     │     │
│  └──────────┘  └──────────┘  └──────────┘     │
│        │             │             │            │
│        ▼             ▼             ▼            │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐     │
│  │ 통계     │  │ 크롤링   │  │ 가져오기 │     │
│  │ 히스토리 │  │ 스케줄   │  │ 내보내기 │     │
│  │ 빠른실행 │  │ 설정     │  │ 삭제     │     │
│  └──────────┘  └──────────┘  └──────────┘     │
│                                                 │
└─────────────────────────────────────────────────┘
                      │
                      ▼
         ┌────────────────────────┐
         │    크롤러 시스템        │
         │  (Playwright 기반)     │
         └────────────────────────┘
                      │
                      ▼
         ┌────────────────────────┐
         │   JSON 파일 저장소      │
         │    (./exports/)        │
         └────────────────────────┘
                      │
                      ▼
         ┌────────────────────────┐
         │   로컬 스토리지 DB     │
         │   (브라우저 기반)      │
         └────────────────────────┘
```

## 🔄 데이터 흐름

### 1. 크롤링 프로세스
```
사용자 클릭 → 크롤러 실행 → 데이터 수집 → JSON 저장 → (자동 가져오기) → localStorage 업데이트
```

### 2. 수동 가져오기 프로세스
```
JSON 파일 선택 → 데이터 검증 → localStorage 덮어쓰기 → UI 업데이트
```

### 3. 데이터 내보내기 프로세스
```
현재 데이터 읽기 → JSON 포맷팅 → 파일 저장 → exports 폴더
```

## 🛠️ 기술 스택

- **Frontend**: Next.js 15, React, TypeScript
- **UI**: shadcn/ui, Tailwind CSS
- **크롤링**: Playwright
- **데이터 저장**: LocalStorage (임시), JSON 파일
- **상태 관리**: React Hooks, localStorage

## 📋 주요 기능

### 1. 대시보드 탭
- **실시간 통계**: 총 핫딜, 활성 딜, 오늘 수집, 데이터 소스
- **빠른 실행**: 원클릭 크롤링 버튼
- **크롤링 히스토리**: 최근 10개 크롤링 기록
- **진행 상황**: 실시간 프로그레스 바

### 2. 크롤러 탭
- **소스 선택**: 뽐뿌 (추가 예정: 루리웹, 클리앙 등)
- **페이지 수 설정**: 1, 5, 10, 20 페이지
- **자동 가져오기**: 크롤링 후 자동 데이터 적용
- **스케줄 설정**: 자동 크롤링 주기 설정 (UI만)

### 3. 데이터 탭
- **데이터 관리**: 내보내기, 전체 삭제
- **JSON 파일 목록**: 최근 10개 파일
- **가져오기**: 개별 파일 선택 가져오기

### 4. 설정 탭
- 향후 확장 예정

## 🚀 사용 가이드

### 빠른 시작
1. `/admin/hotdeal-manager` 접속
2. 대시보드 탭에서 "크롤링 시작" 클릭
3. 자동으로 데이터 수집 및 적용 완료

### 고급 사용
1. 크롤러 탭에서 세부 설정 조정
2. 데이터 탭에서 이전 크롤링 데이터 관리
3. 히스토리에서 크롤링 성공률 모니터링

## 🔧 확장 계획

### 단기 (1-2주)
- [ ] 추가 크롤러 구현 (루리웹, 클리앙 등)
- [ ] 데이터 필터링 및 중복 제거
- [ ] 크롤링 데이터 미리보기

### 중기 (1-2개월)
- [ ] 실제 스케줄링 시스템 (cron job)
- [ ] Supabase 마이그레이션
- [ ] 크롤링 규칙 커스터마이징

### 장기 (3-6개월)
- [ ] AI 기반 카테고리 자동 분류
- [ ] 가격 추적 및 알림
- [ ] 멀티 테넌트 지원

## 🏗️ 개발자 가이드

### 새로운 크롤러 추가
```typescript
// 1. BaseHotdealCrawler 상속
export class NewSiteCrawler extends BaseHotdealCrawler {
  async crawl(): Promise<HotDeal[]> {
    // 구현
  }
}

// 2. CrawlerManager에 등록
this.crawlers.set('newsite', new NewSiteCrawler(options))

// 3. UI에 옵션 추가
<SelectItem value="newsite">새 사이트</SelectItem>
```

### API 엔드포인트
- `GET /api/placeholder/list-exports`: JSON 파일 목록
- `POST /api/placeholder/export-current-data`: 현재 데이터 내보내기
- `GET /api/placeholder/exports/[filename]`: JSON 파일 읽기

## 📝 주의사항

1. **localStorage 한계**: 브라우저 기반이므로 5-10MB 제한
2. **동시성 문제**: 여러 탭에서 동시 작업 시 주의
3. **크롤링 부하**: 과도한 크롤링은 차단될 수 있음
4. **데이터 백업**: 정기적인 JSON 백업 권장

## 🎯 핵심 원칙

1. **KISS (Keep It Simple, Stupid)**: 복잡한 기능보다 단순한 사용성
2. **데이터 무결성**: 항상 백업 가능한 상태 유지
3. **사용자 피드백**: 모든 액션에 명확한 피드백
4. **점진적 개선**: 작은 기능부터 차근차근 구현

---

이 시스템은 운영자가 효율적으로 핫딜 데이터를 관리할 수 있도록 설계되었습니다. 
지속적인 개선을 통해 더 나은 시스템으로 발전시켜 나가겠습니다.