if($.fn.selectpicker!==undefined){$.fn.selectpicker.Constructor.BootstrapVersion="4";$.fn.selectpicker.Constructor.DEFAULTS.virtualScroll=false}Date.prototype.format=function(b){if(!this.valueOf()){return" "}var a=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"];var c=this;return b.replace(/(yyyy|yy|MM|dd|E|hh|mm|ss|a\/p)/gi,function(d){switch(d){case"yyyy":return c.getFullYear();case"yy":return(c.getFullYear()%1000).zf(2);case"MM":return(c.getMonth()+1).zf(2);case"dd":return c.getDate().zf(2);case"E":return a[c.getDay()];case"HH":return c.getHours().zf(2);case"hh":return((h=c.getHours()%12)?h:12).zf(2);case"mm":return c.getMinutes().zf(2);case"ss":return c.getSeconds().zf(2);case"a/p":return c.getHours()<12?"오전":"오후";default:return d}})};String.prototype.string=function(a){var c="",b=0;while(b++<a){c+=this}return c};String.prototype.zf=function(a){return"0".string(a-this.length)+this};Number.prototype.zf=function(a){return this.toString().zf(a)};var admin_square=function(b){var c=$.summernote.ui;var a=c.button({contents:'<i class="fa fa-square-o"></i>',tooltip:"글상자 박스",click:function(d){$("#summernote").summernote("editor.pasteHTML",'<div align="center"><table align="center" class="__se_tbl" style="border-width: 1px 1px 0px 0px; border-style: dashed dashed none none; border-color: rgb(199, 199, 199) rgb(199, 199, 199) currentColor currentColor;width:800px;max-width: 100%" border="1" cellspacing="0" cellpadding="0" attr_no_border_tbl="1"><tbody><tr><td width="800" style="border-width: 0px 0px 1px 1px; border-style: none none dashed dashed; border-color: currentColor currentColor rgb(199, 199, 199) rgb(199, 199, 199);"><p align="justify" style="text-align: justify; line-height: 2;min-height: 30px"><span style="font-size: 12pt;"></span></p></td></tr></tbody></table><p style="line-height: 2;"></p></div>')}});return a.render()};var summary_square=function(){var b=$.summernote.ui;var a=b.button({contents:'<i class="fa fa-square"></i>',tooltip:"요약 박스",click:function(c){$("#summernote").summernote("editor.pasteHTML",'<div align="center"><table align="center" style="border-width: 1px; border-color: rgb(199, 199, 199) rgb(199, 199, 199) currentColor currentColor;width:800px;max-width: 100%" border="1" cellspacing="0" cellpadding="0" attr_no_border_tbl="1"><tbody><tr><td width="800" style="border-width: 1px; border-color: currentColor currentColor rgb(199, 199, 199) rgb(199, 199, 199);"><p align="justify" style="padding: 0; text-align: justify; line-height: 2;min-height: 30px"><span style="font-size: 12pt;"></span></p></td></tr></tbody></table><p style="line-height: 2;"></p></div>')}});return a.render()};$(window).load(function(){var c=false;$(".another-planet-inner .sort-area .sort-bt").on("click",function(){if(c===false){$(this).addClass("active");$(".another-planet-inner .sort-area .hide-area").addClass("active");return false}else{$(this).removeClass("active");$(".another-planet-inner .sort-area .hide-area").removeClass("active");return false}});$(".another-planet-inner .hide-area li a").on("click",function(){var d=$(".another-planet-inner .sort-area .sort-bt").html();var e=$(this).html();$(".another-planet-inner .sort-area .sort-bt").html(e);$(this).html(d);getPlanetList();return false});$(".another-planet-inner .sort-area .sort-bt").focusout(function(){c=false;var d=$(this);setTimeout(function(){$(".another-planet-inner .sort-area .sort-bt").removeClass("active");d.siblings("ul").removeClass("active")},200)});var b=false;$(".cate-select-area .cate-area .cate-bt").on("click",function(){if(b===false){$(this).addClass("active");$(".cate-select-area .cate-area .hide-area").addClass("active");return false}else{$(this).removeClass("active");$(".cate-select-area .cate-area .hide-area").removeClass("active");return false}});$(".cate-select-area .cate-area .hide-area li a").on("click",function(){var d=$(".cate-select-area .cate-area .cate-bt span").text();var e=$(this).text();$(".cate-select-area .cate-area .cate-bt span").text(e);$(this).text(d);if(d=="카테고리"){$(this).remove()}if($(".cate-select-area .cate-area .hide-area").data("custom")!=undefined&&$(".cate-select-area .cate-area .hide-area").data("custom")==18){getRankList(e)}$('[name="ca_name"]').val(e);return false});$(".cate-select-area .cate-area .cate-bt").focusout(function(){b=false;var d=$(this);setTimeout(function(){$(".cate-select-area .cate-area .cate-bt").removeClass("active");d.siblings("div").removeClass("active")},200)});var a=false;$(".cate-select-area2 .cate-area2 .cate-bt2").on("click",function(){if(a===false){$(this).addClass("active");$(".cate-select-area2 .cate-area2 .hide-area2").addClass("active");return false}else{$(this).removeClass("active");$(".cate-select-area2 .cate-area2 .hide-area2").removeClass("active");return false}});$(".cate-select-area2 .cate-area2 .hide-area2 li a").on("click",function(){var d=$(".cate-select-area2 .cate-area2 .cate-bt2 span").text();var e=$(this).text();console.log(d);console.log(e);$(".cate-select-area2 .cate-area2 .cate-bt2 span").text(e);$(this).text(d);$(this).remove();if($(".cate-select-area2 .cate-area2 .hide-area2").data("custom")!=undefined&&$(".cate-select-area2 .cate-area2 .hide-area2").data("custom")==3){getRankTypeList(e)}return false});$(".cate-select-area2 .cate-area2 .cate-bt2").focusout(function(){a=false;var d=$(this);setTimeout(function(){$(".cate-select-area2 .cate-area2 .cate-bt2").removeClass("active");d.siblings("div").removeClass("active")},200)})});$(document).ready(function(){$(".layerPopup").not(".video-play-pop-wrap").click(function(a){if($(a.target).hasClass("dimmed")){if($(this).hasClass("voter-popup-wrap")){$(this).removeClass("active")}else{$(this).hide()}}});$("[data-type='preview-img']").change(function(){var b=$(this);if(this.files&&this.files[0]){var a=new FileReader();a.onload=function(c){$("#"+b.attr("data-target")).attr("src",c.target.result)};a.readAsDataURL(this.files[0])}});$(".file-attache-btn").click(function(){var a=$("#"+$(this).attr("data-target"));a.trigger("click")});userNickWrapInit();if($.datetimepicker){$.datetimepicker.setLocale("kr");$(".date-picker").each(function(){$(this).attr("autocomplete","off");var a=$(this).attr("data-format");if(!a||a==undefined){a="Y-m-d H:i"}if(a=="Y-m-d"){timepicker=false}else{timepicker=true}$(this).datetimepicker({lang:"kor",timepicker:timepicker,format:a});$(".xdsoft_datetimepicker").addClass("notranslate")})}$(".view-content .note-editor img").each(function(){if($(this).attr("src")){if($(this).parent().prop("tagName")!="A"){$(this).click(function(){img_src=$(this).attr("src");img_width=$(this)[0].naturalWidth;img_height=$(this)[0].naturalHeight;window.open("/view_img?img="+encodeURIComponent(img_src),"imageDetail","location=yes,links=no,toolbar=no,top=10,left=10,width=10,height=10,resizable=yes,scrollbars=no,status=no");return false})}}});$(".ellipsis-with-reply-cnt").each(function(){var c=$(this).parent();var b=$(this).data("original");var a=Number($(this).css("line-height").split("px")[0])*2;c.css("display","block");if(!b){b=$(this).text();$(this).data("original",$(this).text())}while(a<c[0].clientHeight){$(this).text(function(d,e){return e.substring(0,e.length-5)+"..."})}});setTimeout(function(){$(document).scrollLeft((document.body.scrollWidth-document.body.clientWidth)/2)},300)});function open_window(a,d,b){var c=window.open(a,d,b);if(c==null){return false}c.focus()}function selectAllCheckBox(c,b){var d=$(c);var a=$(b);if(d.hasClass("active_on")){a.prop("checked",false);d.removeClass("active_on")}else{a.prop("checked",true);d.addClass("active_on")}}function copyUrlToClipboard(){var a=document.createElement("input");a.value=window.document.location.href;a.style.position="fixed";a.style.right="100%";a.style.top="100%";document.body.appendChild(a);a.select();document.execCommand("copy");document.body.blur();alert("URL이 클립보드에 복사되었습니다")}function singoForm(d,f,c,g,b,a,e){$(".declar-popup-wrap").addClass("active")}function singoFormExit(){$(".declar-popup-wrap").removeClass("active")}function singoSubmit(){if($("input[name='flag']:checked").val()=="3"&&$("#singo_comment").val()==""){alert("세부내역을 작성해주세요.")}else{$("#frmSingo").submit()}}function userNickWrapDraw(b){var a=$(b).html();id=$(b).attr("data-id");$(b).html("");$(b).append('<div class="user-nick-text"></div>');$(b).find(".user-nick-text").append(a)}function idClickArwaDraw(j){$(".id-click-area").remove();var c=$(j).attr("data-id");var f=$(j).attr("data-id-hash");var b=$(j).attr("data-nick");var g=$("<div></div>");var k="<ul></ul>";var n="<li></li>";var m="<a></a>";var i="";var l="";var d=$(j).attr("data-row");if(tb_user_is_admin=="true"){l="admin"}if(d==tb_user_id){i="mine"}if(tb_user_id>0){g.addClass("id-click-area");g.append(k);g.find("ul").append($(n).append($(m).text("프로필").attr("href","javascript:open_window('/users/profile/"+c+"','profile','width=443, height=680, scrollbars=no');")));g.find("ul").append($(n).append($(m).text("쪽지보내기").attr("href","javascript:open_window('/memo/message/"+c+"','memo','width=414, height=760, scrollbars=no');")));if(location.pathname.match("\\/bbs")){g.find("ul").append($(n).append($(m).text("작성글보기").attr("href","javascript:searchUserPosts('"+b+"');")))}if(l=="admin"||i=="mine"){g.find("ul").append($(n).append($(m).text("포인트 내역").attr("href","javascript:open_window('/users/point/"+c+"','point','width=414, height=636, scrollbars=no');")))}if(i=="mine"){g.find("ul").append($(n).append($(m).text("레벨보기").attr("href","javascript:open_window('/users/level','level','width=414, height=720, scrollbars=no');")))}if(l=="admin"){g.find("ul").append($(n).append($(m).text("전체게시물").attr("href","/r0r0d00m/boardnew?groupId=&type=&nick="+b)))}if(i=="mine"){g.find("ul").append($(n).append($(m).text("차단목록").attr("href","javascript:open_window('/friend/van','level','width=414, height=720, scrollbars=no');")))}if(l=="admin"||i=="mine"){if(l=="admin"&&i!="mine"){g.find("ul").append($(n).append($(m).text("회원정보 변경").attr("href","/r0r0d00m/users/"+d+"/edit")))}else{g.find("ul").append($(n).append($(m).text("회원정보 변경").attr("href","/users/check_password?work=edit")))}}}$(j).append(g.css({display:"block",left:"10px",top:"25px"}))}function searchUserPosts(a){const c=location.pathname.match("^((?!\\/views).)*");if(c){var b=location.origin+c[0];b+="?page=1&category=&sort=num, reply&kind=nick&keyword="+a+"&direction=DESC";location.href=b}}function userNickWrapInit(){$(".user-nick-wrap").click(function(){$(this).addClass("active");idClickArwaDraw(this)});$(document).click(function(a){if(!$(a.target).closest(".id-click-area").length&&!$(a.target).closest(".user-nick-wrap").length){$(".id-click-area").remove()}});$(".user-nick-wrap").each(function(a,b){userNickWrapDraw(b)})}function userNickWrapReInit(){$(".user-nick-wrap").not("[tabindex]").click(function(){$(this).addClass("active");idClickArwaDraw(this)});$(".user-nick-wrap").not("[tabindex]").each(function(a,b){userNickWrapDraw(b)})}function htmlspecialchars_decode(c,b){var e=0;var d=0;var f=false;if(typeof b==="undefined"){b=2}c=c.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">");var a={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(b===0){f=true}if(typeof b!=="number"){b=[].concat(b);for(d=0;d<b.length;d++){if(a[b[d]]===0){f=true}else{if(a[b[d]]){e=e|a[b[d]]}}}b=e}if(b&a.ENT_HTML_QUOTE_SINGLE){c=c.replace(/&#0*39;/g,"'")}if(!f){c=c.replace(/&quot;/g,'"')}c=c.replace(/&amp;/g,"&");return c}function followPop(a,b){if(a){a="#"+a}window.open("/users/profile/"+b+a,"profile","width=443, height=680, scrollbars=no")}function loader(a){if(a==false){$(".loader").fadeOut(300)}else{$(".loader").fadeIn(300)}}function open_parent(a){opener.window.location.href=a}function closeVideoPop(){$(".video-play-pop-wrap").removeClass("active");$(".video-play-pop-wrap .frame-container").html("")}function videoPopActive(a){$(".video-play-pop-wrap").addClass("active");$(".video-play-pop-wrap .frame-container").html($(a).attr("data-html"))}function onActiveTab(b,a){$(b).parent().find(".custom-tab-btn").removeClass("active on");$(b).addClass("active on");$(a).parent().find(".custom-tab-cont").removeClass("active on");$(a).addClass("active on")}var pictureCustom=function(b){var c=$.summernote.ui;var a=c.button({contents:'<i class="note-icon-picture"></i>',tooltip:"이미지",click:function(){pictureCustomPopupActive()}});return a.render()};var fileData=[];var fileDataP=[];var fileDataPC=[];var fileDataOption={language:"kr",maxFileSize:15000,maxFilePreviewSize:15000,initialPreview:fileDataP,initialPreviewAsData:true,initialPreviewConfig:fileDataPC};function pictureCustomPopupActive(){$("#pictureCustomModal").modal();$("#pictureCustomInput").fileinput("unlock");$("#pictureCustomInput").fileinput("clear");$("#pictureCustomInput").fileinput("destroy").fileinput(fileDataOption);$("#pictureCustomInput").fileinput("resume");$("#pictureCustomInput").on("fileselect",pictureCustomRebuild);$("#pictureCustomInput").on("filebeforedelete",pictureCustomDelete);if($("#summernote").length>0){$("#summernote").summernote("saveRange")}if($("#summernote_comment").length>0){$("#summernote_comment").summernote("saveRange")}}function pictureCustomRebuild(e,f,d){var c=0;var a=new Map();var b=new Map();$.each(e.target.files,function(j,k){fileData.push(k);var g=new FileReader();g.onload=function(m){a.set(j,m.target.result);b.set(j,k);c++;if(c===e.target.files.length){for(var l=0;l<a.size;l++){fileDataP.push(a.get(l));var i={caption:b.get(l).name,size:b.get(l).size,url:"/",extra:b.get(l),key:fileDataPC.length};fileDataPC.push(i)}fileDataOption.initialPreview=fileDataP;fileDataOption.initialPreviewConfig=fileDataPC;$("#pictureCustomInput").off("fileselect",pictureCustomRebuild);$("#pictureCustomInput").fileinput("clear");$("#pictureCustomInput").fileinput("destroy").fileinput(fileDataOption);$("#pictureCustomInput").fileinput("resume").fileinput("enable").fileinput("unlock");$("#pictureCustomInput").prop("readonly",false);$("#pictureCustomInput").prop("disabled",false);$("#pictureCustomInput").on("fileselect",pictureCustomRebuild)}};g.readAsDataURL(k)})}function pictureCustomDelete(b,a,c){$.each(fileDataPC,function(d,f){if(f.key!=undefined){if(f.key==a){fileData.splice(d,1);fileDataP.splice(d,1);fileDataPC.splice(d,1);fileDataOption.initialPreview=fileDataP;fileDataOption.initialPreviewConfig=fileDataPC;$("#pictureCustomInput").off("fileselect",pictureCustomRebuild);$("#pictureCustomInput").fileinput("clear");$("#pictureCustomInput").fileinput("destroy").fileinput(fileDataOption);$("#pictureCustomInput").fileinput("resume").fileinput("enable").fileinput("unlock");$("#pictureCustomInput").prop("readonly",false);$("#pictureCustomInput").prop("disabled",false);$("#pictureCustomInput").on("fileselect",pictureCustomRebuild)}}})}function pictureCustomUpload(){$("#pictureCustomInput").prop("readonly",false);$("#pictureCustomInput").prop("disabled",false);$("#pictureCustomInput").trigger("click")}var html="";var uploadItemCount=0;var currentUploadCount=0;var items=[];function pictureCustomPopupSubmit(b){var a=$("#pictureCustomInput").fileinput("getPreview");uploadItemCount=a.config.length;if(uploadItemCount==0){alert("업로드할 이미지를 첨부해주세요.");return}$("#pictureCustomModal").modal("hide");loader();currentUploadCount=0;setTimeout(function(){$.each(a.config,function(d,g){var c=g.extra;var f=b;uploadImageFiles2(d,c,f)});loader(false)},300)}function pictureCustomClear(a){fileData=[];fileDataP=[];fileDataPC=[];fileDataOption.initialPreview=fileDataP;fileDataOption.initialPreviewConfig=fileDataPC;$("#pictureCustomInput").off("fileselect",pictureCustomRebuild);$("#pictureCustomInput").fileinput("destroy");if(a){$("#pictureCustomInput").fileinput(fileDataOption);$("#pictureCustomInput").prop("readonly",false);$("#pictureCustomInput").prop("disabled",false);$("#pictureCustomInput").on("fileselect",pictureCustomRebuild)}}$(document).ready(function(){$("#pictureCustomModal").on("hidden.bs.modal",function(){pictureCustomClear(false)});$("#pictureCustomInput").on("filesorted",function(a,c){fileData=[];fileDataP=[];fileDataPC=[];var b=$("#pictureCustomInput").fileinput("getPreview");$.each(b.config,function(g,j){var f=j.extra;fileData.push(f);var d=b.content[g];fileDataP.push(d);fileDataPC.push(j);if(g==b.config.length-1){fileDataOption.initialPreview=fileDataP;fileDataOption.initialPreviewConfig=fileDataPC}})})});function good_color_mark(a){if(a==1){return"num tp2"}else{if(a>=2&&a<5){return"num tp3"}else{if(a>=5&&a<10){return"num tp4"}else{if(a>=10&&a<20){return"num tp5"}else{if(a>=20){return"num tp6"}else{return"num tp1"}}}}}}function cleanPastedHTML(a){output=a.replace(/(<([^>]+)>)/ig,"");return output}function setCookie(c,d,e,b){var a=new Date();a.setHours(a.getHours()+e);a.setMinutes(a.getMinutes()+b);document.cookie=c+"="+escape(d)+"; path=/; expires="+a.toGMTString()+";"}function closeBanner(b){var a=new Date();setCookie(b,"done",23-a.getHours(),60-a.getMinutes())}function getCookie(c){var b=c+"=";var a=0;while(a<=document.cookie.length){var d=(a+b.length);if(document.cookie.substring(a,d)==b){if((endOfCookie=document.cookie.indexOf(";",d))==-1){endOfCookie=document.cookie.length}return unescape(document.cookie.substring(d,endOfCookie))}a=document.cookie.indexOf(" ",a)+1;if(a==0){break}}return""}function addImageIntoSummernote(c,f,a,b){if(f.types==="mp4"){var d='<video class="q-mp4" width="'+f.width+'" muted="muted" autostart="true" autoplay="" loop="loop" playsinline="" webkit-playsinline="">';d+='<source src="'+f.mp4_url+'" type="video/mp4" />';d+="</video>";if(c>0&&b){d="<span><br><br>"+d+"</sapn>"}items[c]=d}else{var e='<img src="'+f.img_path+'" alt="퀘이사존" />';if(c>0&&b){e="<span><br><br>"+e+"</sapn>"}items[c]=e}currentUploadCount++;if(currentUploadCount===uploadItemCount){a.summernote("restoreRange");$.each(items,function(j,g){a.summernote("insertNode",$(g)[0])});items=[];currentUploadCount=0;uploadItemCount=0;loader(false)}}document.addEventListener("DOMContentLoaded",function(){var b=document.querySelectorAll("img.lazy");var c;function a(){if(c){clearTimeout(c)}c=setTimeout(function(){var d=window.pageYOffset;b.forEach(function(e){if(e.offsetTop<(window.innerHeight+d)){e.src=e.dataset.src;e.classList.remove("lazy")}});if(b.length==0){document.removeEventListener("scroll",a);window.removeEventListener("resize",a);window.removeEventListener("orientationChange",a)}},20)}document.addEventListener("scroll",a);window.addEventListener("resize",a);window.addEventListener("orientationChange",a)});