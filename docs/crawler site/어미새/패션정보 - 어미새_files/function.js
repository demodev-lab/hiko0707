function ajaxEventRebind(){_dropDownMenu(jQuery);_autoEmbed(jQuery);_autoLink(jQuery);_lockedIconToggle(jQuery);null!==document.querySelector(".bd_time")&&(_timelineTagInsert(jQuery),function(a){a("#FiledataWrp").on("change","#Filedata",function(){ajaxFileUpload()})}(jQuery));checkMobileDevice()&&mobileEvents(jQuery)}
function checkMobileDevice(){var a="Android;iPhone;iPad;iPod;BlackBerry;Windows CE;SAMSUNG;LG;MOT;SonyEricsson".split(";"),b;for(b in a)if(null!=navigator.userAgent.match(a[b]))return!0;return!1}
function mobileEvents(a){"none"==a.cookie("cmt_noti_display")&&a("._notification").addClass("off");a("._notification .close").on("click",function(){a("._notification").addClass("off");a.cookie("cmt_noti_display","none",{expires:7})});"on"==a.cookie("mfilter")?(a(".trigger-filter").addClass("on"),a("._filter").addClass("on")):(a(".trigger-filter").removeClass("on"),a("._filter").removeClass("on"));a(".trigger-filter").on("click",function(){a("._filter").toggleClass("on");a(this).toggleClass("on");
a(this).hasClass("on")?a.cookie("mfilter","on"):a.removeCookie("mfilter")});a("._comment").hammer({domEvents:!0}).on("swipe",function(b){var d=a(b.target).data("press-trigger");setTimeout(function(){cmtOverlay(b,d)},100)});a(".cmt-option").on("click",function(b){(a(b.target).is(".cmt-option .quit")||a(b.target).is(".cmt-option"))&&setTimeout(function(){a("body").off("touchmove");a(".cmt-overlay-background").removeClass("on")},100)})}
function voteUpDocument(a){exec_json("document.procDocumentVoteUp",{target_srl:a},function(){jQuery.ajax({url:request_uri+"index.php?mid="+current_mid+"&document_srl="+a,dataType:"html",success:function(b){b=jQuery(b);b=b.find("#voteUpCount_"+a).html();jQuery("#voteUpCount_"+a).html(b);jQuery(document).prtToast({msg:"\ucd94\ucc9c \uc644\ub8cc!",timeout:1500})}})})}
function voteDownDocument(a){exec_json("document.procDocumentVoteDown",{target_srl:a},function(){jQuery("#D_ ._ft > a.blame").addClass("update");var b=jQuery("#voteDownCount_"+a).data("dvcd"),b=b-1;jQuery("#voteDownCount_"+a).text(b)})}
function voteUpComment(a){exec_json("comment.procCommentVoteUp",{target_srl:a},function(){var b=jQuery("#vU_"+a).data("cvcu");b++;jQuery("#vU_"+a).text(b);jQuery(document).prtToast({msg:"\ucd94\ucc9c \uc644\ub8cc!",timeout:1500});jQuery(".cmt-overlay-background.on").length&&(jQuery("body").off("touchmove"),jQuery(".cmt-overlay-background").removeClass("on"))})}
function voteDownComment(a){exec_json("comment.procCommentVoteDown",{mid:current_mid,target_srl:a},function(){var b=jQuery("#vD_"+a).data("cvcd"),b=b+1;jQuery("#vD_"+a).text(b);jQuery(".cmt-overlay-background.on").length&&(jQuery("body").off("touchmove"),jQuery(".cmt-overlay-background").removeClass("on"))})}
function delComment(a){if(window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){var b=[];b.comment_srl=a;exec_xml("board","procBoardDeleteComment",b,function(){jQuery("#comment_"+a).remove();jQuery(".cmt-overlay-background.on").length&&(jQuery("body").off("touchmove"),jQuery(".cmt-overlay-background").removeClass("on"))})}}function cmtfileToggle(a){jQuery(".file_"+a).toggle()}
function cmtOverlay(a,b){(function(a){var c=a('.cmt-overlay-background[data-cmt-overlay="'+b+'"]'),e=a(window).height()+1;c.appendTo("body");c.addClass("on");c.css({height:e,top:0});a("body").on("touchmove",function(a){a.preventDefault()})})(jQuery)}
function commentInsert(a){(function(b){var d=b(".bd_time").length?request_uri+"index.php?mid="+current_mid+"&page="+triggerCount:location.href;b.ajax({url:d,dataType:"html",success:function(c){c=b(c);c=c.find(".fdbArea_"+a.document_srl).html();b(".fdbArea_"+a.document_srl).html(c);if(!b(".bd_time").length){c=b("div#comment_"+a.comment_srl);var d=c.offset().top;c.position();c.length&&b("html,body").animate({scrollTop:d-200},300)}},complete:function(){ajaxEventRebind()}})})(jQuery)}
function timeLineDocumentSubmit(a){if(a("#t_tArea").length){var b="",d=a("#tWrite div#t_tArea"),c=d.html(),d=d.text();!1===/[\S]+/g.test(d)?"\ub0b4\uc6a9\uc740 \ud544\uc218\uc785\ub2c8\ub2e4.":(c=c.replace(/(\r\n|\n)/g,"<br>"),a("#files .select").length&&(a("#files .select").each(function(){var c=a(this).find("button").attr("data-type");"img"==c?(b=b+'<p><img src="'+a(this).find("button").attr("data-file")+'" alt="'+a(this).find("button").attr("title")+'" /></p>',console.log(b),b=b.replace("/modules/board/skins/pjaxboard/",
""),b=b.replace("/modules/board/m.skins/pjaxboard/",""),console.log(b)):b="music"==c?b+'<div><audio src="'+a(this).find("button").attr("data-file")+'" controls="controls">Your browser does not support this file type. You can download <a href="'+a(this).find("button").attr("data-dnld")+'" style="text-decoration:underline">'+a(this).find("small").text()+"</a> and play it!</audio></div>":"media"==c?b+'<div><video src="'+a(this).find("button").attr("data-file")+'" controls="controls">Your browser does not support this file type. You can download <a href="'+
a(this).find("button").attr("data-dnld")+'" style="text-decoration:underline">'+a(this).find("small").text()+"</a> and play it!</video></div>":b+'<p><a href="'+a(this).find("button").attr("data-dnld")+'" style="text-decoration:underline">'+a(this).find("small").text()+"</a></p>"}),c=a("#m_img_upoad_2:checked").length?c+b:b+c),a("#t_doc_val").val(c))}a("#tWrite").submit()}
function documentInsert(a){var b=request_uri.setQuery("mid",current_mid)+"&page=1";console.log(b);(function(a){a.ajax({url:b,dataType:"html",success:function(b){b=a(b);b=b.find(".bd_time").html();a(".bd_time").html(b)},complete:function(){ajaxEventRebind()}})})(jQuery)}
function tComValueInsert(a,b){b.preventDefault?b.preventDefault():b.returnValue=!1;var d=jQuery("#editor_"+a).text();!1===/[\S]+/g.test(d)?alert("\ub0b4\uc6a9\uc740 \ud544\uc218\uc785\ub2c8\ub2e4"):(jQuery("#ct_val_"+a).val(d),jQuery("#cmtForm_"+a).submit())}
function _timelineTagInsert(a){a(".tagAdd").on("click",function(){a("span.lang_tag").hide()});a("#tags-field").on("focus",function(){a("span.lang_tag").hide()});a("#tags-field").on("blur",function(){0===a(".addedTag").length&&""===a("#tags-field").val()&&a("span.lang_tag").show()});a("#addTagBtn").on("click",function(){a("#tags option:selected").each(function(){a(this).appendTo(a("#selectedTags"))})});a("#removeTagBtn").on("click",function(){a("#selectedTags option:selected").each(function(b){a(this).appendTo(a("#tags"))})});
a(".tagRemove").on("click",function(b){b.preventDefault();a(this).parent().remove()});a("ul.tags").on("click",function(){a("#tags-field").focus()});a("#tags-field").on("keypress",function(b){if("13"==b.which||"44"==b.which)if(b.preventDefault(),""!==a(this).val()){a('<li class="addedTag fl bdr_r"><span>'+a(this).val()+'</span><svg class="tagRemove" onclick="tagRemove();" fill="#FFFFFF" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg></li>').insertBefore(".tags .tagAdd");
b=a("#tags_val").val();var d=a(this).val();a("#tags_val").val(b+","+d+",");a("#tags-field").val("")}})}function tagRemove(){var a=","+jQuery(event.target).siblings("span").text()+",",a=jQuery("#tags_val").val().replace(a,"");jQuery("#tags_val").val(a);jQuery(event.target).parents(".addedTag").remove()}
function reComment(a,b,d){var c=jQuery("#re_cmt").eq(0);jQuery("#re_cmt .editor_use").length&&jQuery("#re_cmt .editor_use").attr("href",request_uri+"index.php?mid="+current_mid+"&document_srl="+a+"&comment_srl="+b+"&act=dispBoardReplyComment");c.find("input[name=error_return_url]").val("/"+a);c.find("input[name=mid]").val(current_mid);c.find("input[name=document_srl]").val(a);c.appendTo(jQuery("#comment_"+b)).fadeIn().find("input[name=parent_srl]").val(b);c.find("a.wysiwyg").attr("href",d);c.find("textarea").focus();
jQuery(".cmt-overlay-background.on").length&&(jQuery("body").off("touchmove"),jQuery(".cmt-overlay-background").removeClass("on"))}function _ctWidthInput(){var a=jQuery(".bd"),b=a.width();400>b?a.attr("data-content-width","w1"):400<=b&&768>b?a.attr("data-content-width","w2"):768<=b&&1024>b?a.attr("data-content-width","w3"):1024<=b&&1367>b?a.attr("data-content-width","w4"):1367<=b&&1850>b?a.attr("data-content-width","w5"):a.attr("data-content-width","w6")}
function _autoEmbed(a){a(".xe_content > p").html(function(a,d){return d.replace(/(?![^<]*>|[^<>]*<\/)(?:(http:|https:)\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g,'<iframe src="//www.youtube.com/embed/$2?modestbranding=1&rel=0&wmode=transparent&theme=light&color=white" frameborder="0" allowfullscreen></iframe>').replace(/(?![^<]*>|[^<>]*<\/)(?:(http:|https:)\/\/)?(?:www\.)?(?:vimeo\.com)\/(.+\d)/g,'<iframe src="//player.vimeo.com/video/$2" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').replace(/((?![^<]*>|[^<>]*<\/)(?:(https?:)?\/\/)[\w\.\/?&:;=#%~-]*(?:\.swf))/g,
'<embed src="$1" wmode="transparent"></embed>')});if(a(".xe_content iframe")||a(".xe_content embed").length)a(".xe_content embed").parents("p").addClass("vid"),a(".xe_content iframe").parents("p").addClass("vid")}
function _autoLink(a){ return; var b=/(?![^<]*>|[^<>]*<\/)((https?:)?\/{2}[\da-z\.-]+\.[a-z\.]{2,}[\uac00-\ud7a3\w\/?&;:=#%~\.-]*[\/]?)/gi;a('.xe_content [class!="vid"]').html(function(a,c){return c.replace(b,'<a href="$1">$1</a>')});a(".al .xe_content").html(function(a,c){return c.replace(b,'<a href="$1">$1</a>')})}function _dropDownMenu(a){a(".db_right").dropdown({alignment:"left",inDuration:0,outDuration:500});a(".db_left").dropdown({alignment:"right",inDuration:0,outDuration:500})}
function _lockedIconToggle(a){a("#re_cmt label[class*=locked]").on("click",function(){a("#re_cmt label[class*=locked]").toggle()});a("#cmtForm label[class*=locked]").on("click",function(){a("#cmtForm label[class*=locked]").toggle()});a("#tWrite label[class*=locked]").on("click",function(){a("#tWrite label[class*=locked]").toggle()})};