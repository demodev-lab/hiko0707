# ISR(Incremental Static Regeneration) 캐싱 전략

## 개요
ISR을 통해 정적 페이지의 성능 이점과 동적 데이터의 최신성을 모두 확보했습니다.

## 구현된 페이지별 캐싱 전략

### 1. 홈페이지 (`/`)
- **재생성 주기**: 1시간 (`revalidate = 3600`)
- **이유**: 홈페이지는 자주 방문되지만 콘텐츠가 매우 빈번하게 변경되지는 않음
- **최적화**: `HotDealsSection`을 서버 컴포넌트로 변경하여 서버에서 데이터 직접 페칭

### 2. 핫딜 목록 페이지 (`/hotdeals`)
- **재생성 주기**: 5분 (`revalidate = 300`)
- **이유**: 핫딜 정보는 실시간성이 중요하므로 짧은 주기로 업데이트
- **구조**:
  - 서버 컴포넌트: 데이터 페칭, 통계 계산
  - 클라이언트 컴포넌트 (`HotDealsClient`): 필터링, 정렬 등 인터랙티브 기능

### 3. 핫딜 상세 페이지 (`/hotdeals/[id]`)
- **재생성 주기**: 10분 (`revalidate = 600`)
- **이유**: 개별 핫딜 정보는 목록보다는 덜 자주 변경됨
- **특징**:
  - `generateStaticParams`: 인기 핫딜 10개 사전 생성
  - `dynamicParams = true`: 새로운 핫딜도 동적으로 생성
  - 동적 메타데이터 생성으로 SEO 최적화

### 4. FAQ 페이지 (`/faq`)
- **재생성 주기**: 24시간 (`revalidate = 86400`)
- **이유**: FAQ는 거의 변경되지 않는 정적 콘텐츠
- **구조**: 검색/필터링 기능만 클라이언트 컴포넌트로 분리

## 성능 개선 효과

### 1. 초기 로딩 속도
- 서버 사이드 렌더링으로 첫 페이지 로드 시간 단축
- JavaScript 번들 크기 감소 (클라이언트 로직 최소화)

### 2. 서버 부하 감소
- 캐시된 페이지 제공으로 데이터베이스 쿼리 감소
- 동시 접속자가 많아도 안정적인 성능 유지

### 3. SEO 개선
- 정적 HTML 제공으로 검색 엔진 크롤링 개선
- 동적 메타데이터로 각 페이지별 최적화된 정보 제공

## 추가 최적화 권장사항

### 1. CDN 활용
```typescript
// next.config.js
module.exports = {
  images: {
    domains: ['cdn.hiko.kr'],
  },
}
```

### 2. 이미지 최적화
- Next.js Image 컴포넌트 활용
- 적절한 sizes 속성 설정
- priority 속성으로 LCP 최적화

### 3. 데이터베이스 쿼리 최적화
- 자주 사용되는 쿼리에 인덱스 추가
- 복잡한 집계는 미리 계산하여 저장

### 4. Edge Functions 활용
- 지역별 캐싱으로 글로벌 성능 개선
- Middleware로 요청 전처리

## 모니터링

### 1. Core Web Vitals
- LCP (Largest Contentful Paint): < 2.5s
- FID (First Input Delay): < 100ms
- CLS (Cumulative Layout Shift): < 0.1

### 2. 캐시 히트율
- 캐시 히트/미스 비율 모니터링
- 재생성 빈도 조정 필요성 파악

### 3. 사용자 경험
- 실시간 데이터와 캐시된 데이터의 차이 모니터링
- 사용자 피드백 수집

## 주의사항

1. **Local Storage 한계**: 현재 로컬 스토리지 기반이므로 실제 프로덕션에서는 데이터베이스 마이그레이션 필요
2. **캐시 무효화**: 중요한 업데이트 시 수동으로 캐시 무효화 필요
3. **동적 기능**: 사용자별 개인화 기능은 여전히 클라이언트 사이드에서 처리