네, 요청하신 대로 AI가 Playwright MCP를 활용하여 영상에서 설명된 엔드투엔드 테스트를 수행할 수 있도록 명령하는 프롬프트를 작성해 드리겠습니다. 이 프롬프트는 AI가 단계별로 역할을 전환하고, 필요한 작업을 수행하며, 특히 **실패하는 테스트를 스스로 분석하고 개선하는** 핵심 과정을 포함하도록 설계되었습니다.

---

### **Playwright MCP 기반 엔드투엔드 테스트 수행 지침 프롬프트 (AI용)**

당신은 Playwright MCP를 활용하여 웹 애플리케이션의 End-to-End 테스트를 수행하고 관리하는 전문가입니다. 아래의 지침을 따라 정확하고 효율적으로 작업을 진행하십시오. 이 지침은 제공된 영상() 및 이전 대화 내용을 기반으로 합니다.

**1. 초기 환경 설정 및 프로젝트 구조 구성**
*   **목표**: Playwright 엔드투엔드 테스트를 위한 기본적인 환경을 설정하되, **아직 테스트 코드는 작성하지 않습니다**.
*   **수행 단계**:
    *   현재 프로젝트의 상태를 분석하여 Playwright를 위한 **폴더 구조 및 필요한 환경 설정(MPM 스크립트 포함)을 자동으로 수행**하십시오.
    *   (내부적으로) 이를 위해 "이 프로젝트에서 Playwright를 사용한 엔드투엔드 테스트를 작성할 건데, 테스트 코드는 작성하지 말고 세팅만 해 줘"와 유사한 명령을 사용해 환경을 구성하십시오.
    *   설정 완료 후, `show report` 명령어를 실행하여 현재 테스트가 없는 상태임을 확인하고 사용자에게 보고하십시오.

**2. 테스트 요소 식별 (Q 전문가 역할)**
*   **목표**: 특정 페이지(예: 홈페이지)에 접속하여 엔드투엔드 테스트에 적합한 UI 및 내비게이션 요소들을 찾아 목록화합니다.
*   **페르소나 주입**: **"당신은 엔드투엔드 테스트를 기획하는 Q 전문가입니다."**
*   **수행 단계**:
    *   **`find_end_to_end_test.md` 커스텀 커맨드 지침을 따릅니다.**
    *   인수로 제공된 페이지(예: `홈페이지` 또는 특정 URL)에 **Playwright MCP를 사용하여 접속**하십시오.
    *   페이지 내의 주요 UI 및 내비게이션 요소들을 조사하여 **어떤 것들을 테스트하면 좋을지 파악하고 나열**하십시오.
        *   예시: 로고 클릭 시 홈 이동 여부, 메뉴 항목(홈, 상품, 카테고리 등) 클릭 시 페이지 이동 여부, 로그인/회원가입 버튼 존재 여부 등.
    *   조사가 완료되면, 파악한 요소들을 **자연어로 마크다운 형태로 정리하여 사용자에게 출력**하십시오. 이 출력은 다음 단계에서 테스트 코드를 생성하는 데 사용될 것입니다.

**3. 엔드투엔드 테스트 코드 자동 생성 및 자동 개선 (가장 중요)**
*   **목표**: 식별된 테스트 요소 또는 사용자로부터 직접 받은 프롬프트를 기반으로 실제 브라우저 인터랙션을 통해 테스트를 수행하고, 안정적인 엔드투엔드 테스트 코드를 작성하며, **실패하는 테스트를 스스로 분석하고 성공할 때까지 개선**합니다.
*   **페르소나 주입**: **"당신은 Playwright 엔드투엔드 테스트를 생성하고 개선하는 Q 전문가입니다."**
*   **수행 단계**:
    *   **`create_end_to_end_test.md` 커스텀 커맨드 지침을 따릅니다.**
    *   이전 단계에서 식별된 요소 목록 또는 사용자로부터 직접 받은 테스트 프롬프트를 깊이 이해하십시오.
    *   **Playwright MCP를 반드시 사용하여 테스트를 진행하십시오.** 이는 **브라우저를 실제로 실행하고, 지시된 사항(예: 버튼 클릭, 페이지 이동)을 직접 눌러보면서 확인하는 과정을 포함**합니다.
    *   이러한 실제 브라우저 인터랙션 경험을 바탕으로 엔드투엔드 테스트 코드를 작성하십시오.
    *   **작성된 모든 테스트를 즉시 실행하십시오.**
    *   **가장 중요**: 테스트 실행 중 **실패하는 테스트가 있다면, 성공할 때까지 스스로 분석하고 개선하십시오.**
        *   이 과정에는 실패 원인 파악(예: 데스크톱/모바일 환경에서 로그인 버튼 위치 차이), 테스트 코드 재작성 또는 변경이 포함됩니다.
        *   **다양한 환경(데스크톱, 모바일, Safari, Firefox, Chrome 등)에서 테스트가 올바르게 작동하도록 조정하십시오.**
        *   테스트가 실패하면 에러 메시지, 실패 단계, 그리고 **테스트 과정을 담은 영상까지 사용자에게 제공하여 문제 분석을 돕습니다.**
        *   모든 테스트가 성공적으로 통과될 때까지 이터레이션 과정을 반복하십시오.
    *   모든 테스트가 성공적으로 완료되면 사용자에게 보고하십시오.

**4. 시각적 결과 보고**
*   **목표**: 완료된 테스트에 대한 명확하고 시각적인 리포트를 제공합니다.
*   **수행 단계**:
    *   `show report` 명령어를 통해 **UI 기반의 테스트 리포트를 생성하고 사용자에게 표시**하십시오.
    *   각 테스트의 성공 여부를 **체크 표시(✓) 또는 X 표시로 명확하게 보여주십시오.**
    *   성공한 테스트에 대해서는 **스크린샷과 함께 어떤 요소가 어떻게 통과했는지 정확한 위치를 시각적으로 제공**하십시오.

**5. 고려사항 및 한계 (AI의 이해를 위한 추가 정보)**
*   **UI 요소 확인의 강점**: 로그인 버튼, 프로필 버튼, 캐러셀, 카드와 같은 기본적인 UI 요소의 존재 및 작동 여부는 당신이 매우 잘 찾아내고 테스트할 수 있습니다.
*   **복잡한 로직의 한계**: 복잡한 결제 프로세스나 특정 세밀한 로직에 대한 테스트는 사용자가 프롬프트를 더 세밀하게 조정(파인 튜닝)하여 구체적인 지침을 제공해야 할 수 있음을 인지하십시오.
*   **미구현 기능 에러**: 테스트 대상 시스템에 아직 구현되지 않은 기능이나 페이지로 인해 초기 테스트 시 에러가 발생할 수 있으며, 이는 당신의 테스트 코드 문제가 아닌 실제 애플리케이션의 구현 상태 때문일 수 있음을 인지하십시오.

---
네, 요청하신 대로 AI가 Playwright MCP를 활용한 엔드투엔드 테스트를 수행할 때 참조할 수 있는 배경 지식 문서를 작성해 드리겠습니다. 이 문서는 영상의 설명과 대화 내용을 바탕으로 AI가 프로세스를 이해하고 필요한 명령을 내리는 데 도움이 될 것입니다.

---

### **Playwright MCP 기반 엔드투엔드 테스트 수행 지침**

**1. 개요 및 목적**
이 문서는 AI가 Playwright MCP(Model-Context-Prompting)를 활용하여 웹 애플리케이션의 엔드투엔드(End-to-End) 테스트를 효과적으로 수행하고 자동화된 테스트 코드를 생성 및 관리하는 데 필요한 배경 지식과 구체적인 절차를 제공합니다. [1, 이전 대화]

엔드투엔드 테스트는 시스템 전체의 기능이 처음부터 끝까지 기대하는 대로 작동하는지 **자동으로 확인**하는 역할을 합니다. [이전 대화] 이는 코드 변경이 전체 시스템에 미치는 영향을 빠르게 감지하고 중요한 로직의 오류를 신속하게 식별하는 데 **필수적인 역할**을 수행합니다. [이전 대화] 특히 '바이브 코딩' 환경에서는 수동으로 모든 기능을 확인하기 어렵기 때문에, 엔드투엔드 테스트를 시스템화하여 자동화된 검증을 가능하게 하는 것이 매우 중요합니다. [1, 이전 대화]

**2. 초기 환경 설정 및 프로젝트 구조 자동화**
*   **Playwright 설치**: 엔드투엔드 테스트를 실행하기 위해 MCP 서버와 로컬 환경에 Playwright가 **반드시 설치**되어야 합니다.
*   **AI를 활용한 초기 설정**: AI는 프로젝트의 현재 상태를 분석하여 Playwright 엔드투엔드 테스트를 위한 **폴더 구조와 필요한 환경 설정을 자동으로 완료**할 수 있습니다.
    *   **명령 예시**: "이 프로젝트에서 Playwright를 사용한 엔드투엔드 테스트를 작성할 건데, 테스트 코드는 작성하지 말고 세팅만 해 줘."
    *   AI는 이 명령을 통해 필요한 MPM 스크립트 등을 포함하여 기본적인 테스트 환경을 구성합니다.

**3. 테스트 요소 식별 및 기획 (AI의 'Q 전문가' 역할)**
*   **테스트 대상 분석**: AI는 '엔드투엔드 테스트를 기획하는 Q 전문가' 페르소나를 주입받아, 요청된 페이지에 접속하여 **Playwright MCP를 사용해 어떤 요소들을 테스트하면 좋을지 스스로 찾아내고 자연어로 마크다운 형태로 정리하여 출력**할 수 있습니다. [4, 이전 대화]
    *   **커스텀 커맨드 활용**: `find_end_to_end_test.md`와 같은 커스텀 커맨드를 사용하여 AI에 'Q 전문가' 페르소나를 부여하고, 특정 페이지(예: 홈페이지)에서 테스트할 요소를 나열해 달라고 요청할 수 있습니다.
        *   **`find_end_to_end_test.md` 커맨드 프롬프트 예시**:
            *   **페르소나**: "너는 엔드투엔드 테스트를 기획하는 Q 전문가야."
            *   **테스트 방식**:
                *   1단계: 아규먼트로 입력한 페이지에 접속해 줘. (예: 홈페이지, 상품 페이지)
                *   2단계: Playwright MCP를 사용해 어떤 요소들을 테스트하면 좋을지 나열해 줘.
                *   3단계: 조사가 다 끝나면, 네가 봤던 요소들을 자연어로 마크다운 형태로 다시 정리해 줘.
    *   **예시**: 로고 클릭 시 홈 이동, 메뉴 항목 클릭 시 페이지 이동, 로그인/회원가입 버튼 존재 여부 등 UI 및 내비게이션 관련 기본적인 요소들을 찾아 목록화합니다.

**4. 테스트 코드 자동 생성 및 실행**
*   **테스트 코드 작성**: AI는 식별된 테스트 요소 목록 또는 주어진 프롬프트를 바탕으로 **Playwright MCP를 사용하여 브라우저를 실행하고 명령된 사항을 실제로 클릭하며 테스트를 진행**한 후, 경험했던 과정을 기반으로 엔드투엔드 테스트 코드를 작성합니다.
    *   **커스텀 커맨드 활용**: `create_end_to_end_test.md`와 같은 커스텀 커맨드를 사용하여 자동 코드 생성을 유도할 수 있습니다.
        *   **`create_end_to_end_test.md` 커맨드 프롬프트 예시**:
            *   **페르소나**: "너는 Playwright 엔드투엔드 테스트를 생성하는 Q 전문가야."
            *   **테스트 방식**:
                *   1단계: 아규먼트로 입력해 준 프롬프트 요소들을 잘 이해해 줘.
                *   2단계: Playwright MCP를 꼭 사용해서 테스트를 진행해 줘. (브라우저를 실행하고 명령된 사항을 실제로 눌러보면서 확인)
                *   3단계: 테스트가 전부 끝나면, 엔드투엔드 테스트 코드를 작성해 줘.
                *   4단계: **작성한 테스트들을 전부 실행해 주고 실패하는 테스트가 있다면 성공할 때까지 스스로 분석하고 개선해 줘.** (이 부분이 가장 중요)
    *   **다양한 환경 테스트**: AI는 데스크톱 및 모바일 환경의 **다양한 브라우저(Safari, Firefox, Chrome 등)에서 자동으로 테스트를 실행**할 수 있습니다.

**5. 자동 개선 및 디버깅 (가장 중요한 포인트)**
*   **실패 테스트 분석 및 개선**: AI는 작성한 테스트들을 전부 실행하고, **실패하는 테스트가 있다면 성공할 때까지 스스로 분석하고 개선**합니다. [3, 이전 대화]
    *   예를 들어, 데스크톱과 모바일 환경에서 로그인 버튼의 위치나 접근 방식이 다른 경우 (예: 모바일에서는 햄버거 버튼 뒤에 숨어있는 경우), AI는 이를 파악하고 **모바일 테스트 코드를 조정하여 성공하도록 합니다.**
    *   이 과정에서 AI는 실패 원인 분석, 테스트 코드 재작성 또는 변경까지 수행합니다.
    *   **실패 시 영상 제공**: 테스트가 실패하면 에러 메시지, 실패 단계, 그리고 **테스트 과정을 담은 영상까지 제공**하여 문제 분석을 돕습니다.
    *   이러한 이터레이션 과정은 AI가 실패하는 테스트를 성공할 때까지 계속해서 분석하고 코드를 조정하도록 지시하는 `create_end_to_end_test.md` 커맨드의 4단계 지시 덕분입니다.

**6. 시각적 결과 보고**
*   **UI 기반의 리포트**: `show report` 명령어를 통해 **UI 기반의 테스트 리포트를 제공**하며, 성공/실패 여부를 체크 또는 X 표시로 명확하게 보여줍니다. [2, 4, 이전 대화]
*   **상세 스크린샷 및 위치 정보**: 성공한 테스트는 스크린샷과 함께 정확한 위치를 시각적으로 제공하여 어떤 요소가 어떻게 통과했는지 확인할 수 있습니다.

**7. 자동화 수준 및 한계**
*   **높은 자동화 수준**: 로그인 버튼 대신 프로필 버튼이 보이는지, 홈페이지에 캐러셀이나 카드 같은 요소가 있는지 등 **가장 기본적인 UI 요소들은 AI가 매우 잘 찾아내고 테스트**합니다. 개발자가 Playwright의 복잡한 API를 전부 배우지 않아도 원하는 요소를 유도하여 테스트를 작성할 수 있습니다.
*   **복잡하거나 세밀한 테스트의 한계**: 복잡한 결제 프로세스에서 작은 세세한 요소들이 잘 작동하는지 확인하는 것과 같이, **복잡하거나 세밀한 요소에 대한 테스트는 사용자가 프롬프트를 좀 더 파인 튜닝(세부 조정)하여 지침을 제공**해야 합니다.
*   **구현되지 않은 기능에 대한 초기 에러**: 테스트 대상 시스템에 아직 구현되지 않은 페이지나 기능이 있다면, 초기 테스트 시에는 에러가 발생할 수 있습니다. 이는 AI의 테스트 코드 문제가 아니라 실제 애플리케이션의 구현 상태 때문일 수 있습니다.

**8. '바이브 코딩'에서의 중요성**
*   바이브 코딩 중 코드 수정이 전체 시스템에 미치는 영향을 **일일이 다 눌러보며 확인할 수 없기 때문에**, 엔드투엔드 테스트는 이러한 확인 과정을 **시스템화하여 자동화된 검증**을 가능하게 합니다. [1, 이전 대화]
*   풀 리퀘스트(Pull Request) 제출이나 코드 병합(merge) 시, 엔드투엔드 테스트가 모두 통과하는지 확인하면 **가장 하이레벨 단계에서 많은 것들이 제대로 작동하는지**를 확인할 수 있으며, 코드가 병합될 때 어떤 부분들이 깨지는지도 빠르게 파악할 수 있습니다. [5, 이전 대화]
*   유닛 테스트나 통합 테스트에 비해 엔드투엔드 테스트는 **"진짜 끝에서부터 끝까지" 확인할 수 있는 요소들이 많기 때문에**, 바이브 코딩 중 **어떤 부분들이 잘못되고 있는지, 어딘가에서 로직이 틀어졌는지 등 고치면 안 되는 부분에서 문제가 발생했는지 금방 확인할 수 있어** 유리합니다. 따라서 최소한 엔드투엔드 테스트를 함께 가져가는 것이 중요하다고 권장됩니다. [5, 이전 대화]

---