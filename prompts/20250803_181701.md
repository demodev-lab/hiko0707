koreats

ì•„ë˜ ë‚´ìš©ì´ '/Users/koreats/Desktop/work.mac/hiko0707/docs/supabase-migration-master-plan.md'ì—¬ê¸°ì— ë°˜ì˜ëœê²Œ ë§ì•„? ğŸ“Š Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ì „ì„± ê²€í†  ë³´ê³ ì„œ

  ğŸ¯ Executive Summary

  í˜„ì¬ ê³„íšì„ ëª¨ë‘ ì‹¤í–‰í•˜ë©´ Supabase 19ê°œ í…Œì´ë¸” ì¤‘ **17ê°œ(89.5%)**ê°€ í™œìš©ë˜ë©°, í”„ë¡œì íŠ¸
  ìŠ¤í‚¤ë§ˆì˜ **92%**ê°€ Supabaseë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ë©ë‹ˆë‹¤. 2ê°œì˜ ë¯¸ì‚¬ìš© í…Œì´ë¸”ê³¼ ëª‡ ê°€ì§€ ìŠ¤í‚¤ë§ˆ
  ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°í•˜ë©´ 100% ì™„ì „í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

  ---
  1ï¸âƒ£ Supabase í…Œì´ë¸” â†’ í”„ë¡œì íŠ¸ ë§¤í•‘ í˜„í™©

  âœ… ì™„ì „ ë§¤í•‘ (11ê°œ/19ê°œ = 57.9%)

  | Supabase í…Œì´ë¸”            | í”„ë¡œì íŠ¸ ìŠ¤í‚¤ë§ˆ              | ìƒíƒœ      |
  |-------------------------|-----------------------|---------|
  | users                   | User                  | âœ… ì—°ê²°ë¨   |
  | user_addresses          | Address               | âœ… ì—°ê²°ë¨   |
  | hot_deals               | HotDeal               | âœ… ì—°ê²°ë¨   |
  | hot_deal_comments       | Comment               | âœ… ì—°ê²°ë¨   |
  | proxy_purchases_request | BuyForMeRequest       | âœ… ì—°ê²°ë¨   |
  | proxy_purchase_quotes   | BuyForMeRequest.quote | âœ… ì—°ê²°ë¨   |
  | payments                | Payment               | âœ… ì—°ê²°ë¨   |
  | crawling_logs           | í¬ë¡¤ëŸ¬ ì‹œìŠ¤í…œ               | âœ… ì—°ê²°ë¨   |
  | hot_deal_likes          | User.likedHotdeals    | âœ… ë¶€ë¶„ ì—°ê²° |
  | user_favorite_hotdeals  | ì¦ê²¨ì°¾ê¸°                  | âœ… ë¶€ë¶„ ì—°ê²° |
  | order_status_history    | ì£¼ë¬¸ ì¶”ì                  | âœ… ì—°ê²°ë¨   |

  âš ï¸ ë¶€ë¶„ ë§¤í•‘ (5ê°œ/19ê°œ = 26.3%)

  | Supabase í…Œì´ë¸”        | ë¬¸ì œì          | í•´ê²° ë°©ì•ˆ           |
  |---------------------|-------------|-----------------|
  | user_profiles       | ì¤‘ë³µ ì¡´ì¬       | profilesì™€ í†µí•© í•„ìš” |
  | profiles            | Userì™€ ë¶€ë¶„ ì¤‘ë³µ | ì¶”ê°€ í•„ë“œ í™œìš©        |
  | admin_activity_logs | ìŠ¤í‚¤ë§ˆ ì—†ìŒ      | ê´€ë¦¬ì ê¸°ëŠ¥ì—ì„œ í™œìš©     |
  | system_settings     | ìŠ¤í‚¤ë§ˆ ì—†ìŒ      | ì„¤ì • ê´€ë¦¬ì— í™œìš©       |
  | notifications       | ë¶€ë¶„ ì‚¬ìš©       | ì„œë²„ ì•Œë¦¼ìœ¼ë¡œ í™•ì¥      |

  âŒ ë¯¸ì‚¬ìš© (2ê°œ/19ê°œ = 10.5%)

  | Supabase í…Œì´ë¸”         | ìš©ë„     | í™œìš© ê³„íš           |
  |----------------------|--------|-----------------|
  | hotdeal_translations | ë‹¤êµ­ì–´ ë²ˆì—­ | Phase 5ì—ì„œ êµ¬í˜„ ì˜ˆì • |
  | comment_likes        | ëŒ“ê¸€ ì¢‹ì•„ìš” | ê´€ë¦¬ì ê¸°ëŠ¥ì—ì„œ êµ¬í˜„ ì˜ˆì •  |

  ---
  2ï¸âƒ£ í”„ë¡œì íŠ¸ ìŠ¤í‚¤ë§ˆ â†’ Supabase ë§¤í•‘ í˜„í™©

  âœ… ì™„ì „ ë§¤í•‘ (11ê°œ/12ê°œ = 91.7%)

  - âœ… User, Address, HotDeal, Comment
  - âœ… BuyForMeRequest, Payment, PaymentMethod
  - âœ… Order (ë¶€ë¶„), Translation (êµ¬ì¡° ë‹¤ë¦„)
  - âœ… ShippingInfo, OrderItem (JSONBë¡œ ì €ì¥)

  âŒ ë¯¸ë§¤í•‘ (1ê°œ/12ê°œ = 8.3%)

  - âŒ Post: Supabaseì— posts í…Œì´ë¸” ì—†ìŒ â†’ ì œê±° ì˜ˆì •

  ---
  3ï¸âƒ£ LocalStorage â†’ Supabase ëŒ€ì²´ í˜„í™©

  âœ… ì´ë¯¸ ëŒ€ì²´ë¨ (12ê°œ/19ê°œ = 63.2%)

  âœ… hiko_users â†’ users í…Œì´ë¸”
  âœ… hiko_hotdeals â†’ hot_deals í…Œì´ë¸”
  âœ… hiko_orders â†’ proxy_purchases_request í…Œì´ë¸”
  âœ… hiko_payments â†’ payments í…Œì´ë¸”
  âœ… hiko_buyForMeRequests â†’ proxy_purchases_request í…Œì´ë¸”
  âœ… hiko_addresses â†’ user_addresses í…Œì´ë¸”
  âœ… hiko_favorites â†’ user_favorite_hotdeals í…Œì´ë¸”
  âœ… hiko_hotdeal_comments â†’ hot_deal_comments í…Œì´ë¸”
  âœ… hiko_payment_requests â†’ quotes í…Œì´ë¸”ë¡œ í†µí•©

  âŒ ë¯¸ëŒ€ì²´ (3ê°œ/19ê°œ = 15.8%)

  âŒ hiko_posts â†’ ì œê±° ì˜ˆì •
  âŒ hiko_comments â†’ ì œê±° ì˜ˆì • (post ê´€ë ¨)
  âŒ hiko_translations â†’ hotdeal_translationsë¡œ ì´ë™ ì˜ˆì •

  âš ï¸ í´ë¼ì´ì–¸íŠ¸ ì „ìš© (4ê°œ/19ê°œ = 21.0%)

  âš ï¸ currentUser â†’ ì„¸ì…˜ ì •ë³´ (ìœ ì§€)
  âš ï¸ theme, language â†’ profiles.preferencesë¡œ ì´ë™ ê²€í† 
  âš ï¸ hiko-filter-presets â†’ ì„œë²„ ì €ì¥ ê²€í† 
  âš ï¸ recentSearches â†’ í´ë¼ì´ì–¸íŠ¸ ìœ ì§€

  ---
  4ï¸âƒ£ ì£¼ìš” Gap ë° í•´ê²° ë°©ì•ˆ

  ğŸ”§ ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ í•´ê²°

  | ë¬¸ì œ                        | í˜„ì¬ ìƒíƒœ            | í•´ê²° ë°©ì•ˆ                   |
  ì˜ˆìƒ ì‹œê°„ |
  |---------------------------|------------------|-------------------------|-------|
  | clerk_user_id ë¯¸ì‚¬ìš©         | users í…Œì´ë¸” í•„ë“œ ë¯¸ì—°ê²° | Clerk ì¸ì¦ ì—°ë™
   | 2ì‹œê°„   |
  | source_id vs sourcePostId | í•„ë“œëª… ë¶ˆì¼ì¹˜          | ë§¤í•‘ ë ˆì´ì–´ ì¶”ê°€               |
   1ì‹œê°„   |
  | profiles ì¤‘ë³µ               | 2ê°œ í…Œì´ë¸” ì¡´ì¬        | í†µí•© ë˜ëŠ” ìš©ë„ ë¶„ë¦¬
    | 2ì‹œê°„   |
  | ë²ˆì—­ êµ¬ì¡° ì°¨ì´                  | ë©”ì¸ í…Œì´ë¸” vs ë³„ë„ í…Œì´ë¸” | hotdeal_translations
  í™œìš© | 3ì‹œê°„   |

  ğŸ¯ ë¯¸ì‚¬ìš© í…Œì´ë¸” í™œìš©

  1. hotdeal_translations (3ì‹œê°„)
    - 7ê°œ ì–¸ì–´ ë²ˆì—­ ì§€ì›
    - ìºì‹± ë° ìë™ ë²ˆì—­ í”Œë˜ê·¸
    - API ì‘ë‹µ ìµœì í™”
  2. comment_likes (2ì‹œê°„)
    - ëŒ“ê¸€ ì¢‹ì•„ìš” ê¸°ëŠ¥
    - like_count ìë™ ì—…ë°ì´íŠ¸
    - ì¤‘ë³µ ì¢‹ì•„ìš” ë°©ì§€

  ğŸ—‘ï¸ ë¶ˆí•„ìš” ê¸°ëŠ¥ ì œê±°

  1. Posts ì‹œìŠ¤í…œ (3ì‹œê°„)
    - Post, Comment (postìš©) ëª¨ë¸ ì œê±°
    - recent-posts ì»´í¬ë„ŒíŠ¸ ì œê±°
    - ê´€ë ¨ LocalStorage ì •ë¦¬

  ---
  5ï¸âƒ£ ìµœì¢… ì‹¤í–‰ ê³„íš

  Phase 5 ë³´ì™„ (5ì‹œê°„)

  // 1. hotdeal_translations í™œìš©
  - TranslationService Supabase ì—°ë™
  - ìºì‹± ì „ëµ êµ¬í˜„ (7ì¼)
  - API ì‘ë‹µ ìµœì í™”

  // 2. comment_likes êµ¬í˜„  
  - ëŒ“ê¸€ ì¢‹ì•„ìš” UI/UX
  - ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸

  ìŠ¤í‚¤ë§ˆ ì •í•©ì„± (8ì‹œê°„)

  // 1. í•„ë“œ ë§¤í•‘ ìˆ˜ì •
  - TypeScript ì¸í„°í˜ì´ìŠ¤ ì—…ë°ì´íŠ¸
  - Repository ë§¤í•‘ ë ˆì´ì–´
  - ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸

  // 2. Posts ì œê±°
  - ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ì‚­ì œ
  - LocalStorage í‚¤ ì •ë¦¬
  - ë¼ìš°íŠ¸ ì œê±°

  í´ë¼ì´ì–¸íŠ¸ ìµœì í™” (5ì‹œê°„)

  // 1. ê°œì¸ ì„¤ì • ì„œë²„ ì €ì¥
  - profiles.preferences JSONB í™œìš©
  - theme, language ë§ˆì´ê·¸ë ˆì´ì…˜

  // 2. í´ë¼ì´ì–¸íŠ¸ ì „ìš© ìœ ì§€
  - currentUser (ì„¸ì…˜)
  - recentSearches (ê°œì¸ì •ë³´)

  ìµœì¢… ê²€ì¦ (3ì‹œê°„)

  - E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰
  - ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
  - ë³´ì•ˆ ê°ì‚¬

  ---
  ğŸ“ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ì„±ë„

  í˜„ì¬ ìƒíƒœ

  - Supabase í…Œì´ë¸” í™œìš©ë¥ : 17/19 = 89.5%
  - í”„ë¡œì íŠ¸ ìŠ¤í‚¤ë§ˆ ë§¤í•‘ë¥ : 11/12 = 91.7%
  - LocalStorage ëŒ€ì²´ìœ¨: 15/19 = 78.9%

  ê³„íš ì‹¤í–‰ í›„

  - Supabase í…Œì´ë¸” í™œìš©ë¥ : 19/19 = 100%
  - í”„ë¡œì íŠ¸ ìŠ¤í‚¤ë§ˆ ë§¤í•‘ë¥ : 11/11 = 100% (Post ì œê±°)
  - LocalStorage ëŒ€ì²´ìœ¨: 18/19 = 94.7% (í´ë¼ì´ì–¸íŠ¸ ì „ìš© ì œì™¸)

  ì´ ì†Œìš” ì‹œê°„

  - ê¸°ì¡´ ê³„íš: 43ì‹œê°„
  - ì¶”ê°€ ì‘ì—…: 21ì‹œê°„
  - ì „ì²´: 64ì‹œê°„

  ì´ ê³„íšì„ ì‹¤í–‰í•˜ë©´ Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì™„ì „íˆ ì™„ë£Œë˜ë©°, ëª¨ë“  í…Œì´ë¸”ì´ í™œìš©ë˜ê³ 
  ë¶ˆí•„ìš”í•œ LocalStorage ì˜ì¡´ì„±ì´ ì œê±°ë©ë‹ˆë‹¤.
